/*
 * =====================================================================================
 *
 *       Filename:  findLongestConsecutiveSeq.cc
 *
 *    Description:  
 *
 *        Version:  1.0
 *        Created:  01/12/15 23:54:11
 *       Revision:  none
 *       Compiler:  gcc
 *
 *         Author:  YOUR NAME (), 
 *   Organization:  
 *
 * =====================================================================================
 */
#include <iostream>
using namespace std;

//int max = 0x80000001;
//int min = 0x7fffffff;

/*
       find max and min, not the best
           because need n steps;
	       however, we can compare the two neighbours, to cal the max
	           and min. the complexity is n / 2;
		   */
void FindMinMax(int *array, const int& size, int* max, int* min) {
		*max = 0x80000001;
			*min = 0x7fffffff;
				for(int i = 0; i < size; i ++) {
							if (array[i] < *min) 
											*min = array[i];
									if (array[i] > *max)
												    *max = array[i];
										}
					return;
}

int FindLongestConsecutiveSeq(int* array, const int& size) {
		int max;
			int min;
				FindMinMax(array, size, &max, &min);
					cout << max << ' ' << min << endl;
						int *tmp = new int[max - min + 1];
							// heap intialization
							for(int i = 0; i < max-min+1; i ++)
									    tmp[i] = 0;
								//construct hash array;
								for (int i = 0; i < max-min + 1; i ++) {
											tmp[array[i] - min] += 1;
												}
									//
									//for(int i = 0; i < max-min+1; i ++)
									  //  cout << tmp[i] << endl;
									//cal the max seq
									int max_seq = 0;
										int continous_seq = 1;
											for(int i = 1; i < max - min + 1; i ++) {
														if ((tmp[i] > 0) && (tmp[i - 1] > 0)) {
																		continous_seq += 1;
																				} else {
																								if(continous_seq > max_seq) 
																												    max_seq = continous_seq;
																											continous_seq = 1;
																													}
															}
												return max_seq;
}

int main(int argc, char* argv[]) {
		int array[] = {1,2,3,4,5,6,8};
			cout << FindLongestConsecutiveSeq(array, sizeof(array) / sizeof(int)) << endl;
				return 0;
					
}
